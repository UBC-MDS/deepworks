# affirmation.get_affirmation { #deepworks.affirmation.get_affirmation }

```python
affirmation.get_affirmation(name, mood, energy, category=None, seed=None)
```

Get a personalized developer affirmation based on mood and energy.

This function selects an affirmation using weighted random selection,
prioritizing messages that match both the user's mood-derived category
preferences and their energy level. The name is inserted into the
affirmation text for personalization.

## Parameters {.doc-section .doc-section-parameters}

| Name     | Type   | Description                                                                                                                                                                                                                                                                                                                    | Default    |
|----------|--------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|------------|
| name     | str    | User's name for personalization. Inserted into the affirmation text. If empty or whitespace-only, defaults to "Developer".                                                                                                                                                                                                     | _required_ |
| mood     | str    | Current mood. Determines preferred affirmation categories:  - 'happy' -> motivation, growth - 'stressed' -> self-care, persistence - 'anxious' -> confidence, self-care - 'tired' -> self-care, motivation - 'frustrated' -> persistence, confidence - 'motivated' -> motivation, growth - 'neutral' -> motivation, confidence | _required_ |
| energy   | int    | Energy level on a scale of 1-10. Mapped to categories:  - 1-3: "low" - calming, reassuring affirmations - 4-7: "medium" - balanced, steady affirmations - 8-10: "high" - energetic, driving affirmations                                                                                                                       | _required_ |
| category | str    | Override the mood-to-category mapping with a specific category. Valid options: 'motivation', 'confidence', 'persistence', 'self-care', 'growth'. When provided, only affirmations from this category are strongly weighted.                                                                                                    | `None`     |
| seed     | int    | Random seed for reproducible selection. Uses a local Random instance to avoid affecting global state.                                                                                                                                                                                                                          | `None`     |

## Returns {.doc-section .doc-section-returns}

| Name   | Type   | Description                                                                                                                                                                                                                                                                                      |
|--------|--------|--------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------------|
|        | dict   | Affirmation dictionary with keys:  - text : str - The personalized affirmation message - category : str - The affirmation's category - mood_alignment : float - Score (0.0-1.0) indicating how well   the affirmation matches the user's mood and energy. Higher   values mean better alignment. |

## Raises {.doc-section .doc-section-raises}

| Name   | Type       | Description                                                                     |
|--------|------------|---------------------------------------------------------------------------------|
|        | TypeError  | If name, mood, or category are not strings; if energy or seed are not integers. |
|        | ValueError | If mood is not valid, energy is not between 1 and 10, or category is not valid. |

## Notes {.doc-section .doc-section-notes}

**Weighting Algorithm:**

Affirmations are weighted based on two factors:

1. **Category match**: Primary category gets 3x weight, secondary
   category gets 2x weight, non-matching categories get 0.5x weight.
2. **Energy match**: Exact energy match gets 2x weight, adjacent
   energy level gets 1.5x weight.

**Mood Alignment Score:**

The returned `mood_alignment` score is calculated as:

- Base score: 0.5
- +0.3 if category matches preferred categories
- +0.2 if energy level matches exactly

## Examples {.doc-section .doc-section-examples}

Get a calming affirmation when stressed and low on energy:

```python
>>> affirmation = get_affirmation(
...     name="Alex",
...     mood="stressed",
...     energy=3,
...     seed=5
... )
>>> affirmation["text"]
"Alex, it's okay to step away from the screen."
>>> affirmation["category"]
'self-care'
>>> affirmation["mood_alignment"]
1.0
```

Override category to get a growth-focused affirmation:

```python
>>> affirmation = get_affirmation(
...     name="Sam",
...     mood="motivated",
...     energy=8,
...     category="growth",
...     seed=42
... )
>>> affirmation["text"]
"You're a better developer than you were yesterday, Sam."
>>> affirmation["mood_alignment"]
0.8
```

Empty name defaults to "Developer":

```python
>>> affirmation = get_affirmation(
...     name="  ",
...     mood="neutral",
...     energy=5,
...     seed=0
... )
>>> "Developer" in affirmation["text"]
True
```